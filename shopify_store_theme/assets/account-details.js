const updateAccountDetails=e=>{e.preventDefault();var e=document.forms["edit-customer-form"].firstName.value.trim(),r=document.forms["edit-customer-form"].lastName.value.trim(),t=document.forms["edit-customer-form"].email.value.trim(),o=window.originalCustomerEmail,t=t!==o?t:null,m=document.forms["edit-customer-form"].phone.value.trim(),n=document.forms["edit-customer-form"].password.value.trim(),c=document.forms["edit-customer-form"].emailSubscribe.checked,s=document.forms["edit-customer-form"].marketingAlcoholContent.checked,i=document.forms["edit-customer-form"].marketingChristmas.checked,u=document.forms["edit-customer-form"].marketingEaster.checked,a=document.forms["edit-customer-form"].marketingFathersDay.checked,d=document.forms["edit-customer-form"].marketingMothersDay.checked,l=document.forms["edit-customer-form"].marketingValentinesDay.checked,f=document.forms["edit-customer-form"].marketingHalloween.checked,h=document.forms["edit-customer-form"].marketingRudeContent.checked,g=document.forms["edit-customer-form"].marketingNonSeasonal.checked;validateAccountDetailsForm(e,r,o,m,n)&&apiUpdateAccount(e,r,o,t,m,n,c,s,i,u,a,d,l,f,h,g)},validateAccountDetailsForm=(e,r,t,o,m)=>{let n=!0;e?document.querySelector(".edit-customer-first-name-error").innerHTML="":(n=!1,document.querySelector(".edit-customer-first-name-error").innerHTML="*First Name is required."),r?document.querySelector(".edit-customer-last-name-error").innerHTML="":(n=!1,document.querySelector(".edit-customer-last-name-error").innerHTML="*Last Name is required.");return t&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?document.querySelector(".edit-customer-email-error").innerHTML="":(n=!1,document.querySelector(".edit-customer-email-error").innerHTML="*Please enter a valid email address."),o?document.querySelector(".edit-customer-phone-error").innerHTML="":(n=!1,document.querySelector(".edit-customer-phone-error").innerHTML="*Phone Number is required."),m?document.querySelector(".edit-customer-password-error").innerHTML="":(n=!1,document.querySelector(".edit-customer-password-error").innerHTML="*Password is required."),n},apiUpdateAccount=(e,r,t,o,m,n,c,s,i,u,a,d,l,f,h,g)=>{e={logged_in_customer_id:Shopify?.customer?.id||window.customerId,first_name:e,last_name:r,email:t,phone:m,password:n,email_subscribe:c,marketing_alcohol_content:s,marketing_christmas:i,marketing_easter:u,marketing_fathers_day:a,marketing_mothers_day:d,marketing_valentines_day:l,marketing_halloween:f,marketing_rude_content:h,marketing_non_seasonal:g};o&&(e.new_email=o),fetch("/apps/scribblerApi/v1/shoppify/private/account",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}).then(e=>{if(e.ok)return e.json();throw new Error("HTTP status "+e.status)}).then(e=>{e.success?(document.getElementById("customer-account-error").innerHTML="",document.getElementById("customer-account-success").innerHTML="Your details has been updated"):(document.getElementById("customer-account-error").innerHTML=e.error_msg?e.error_msg.map(e=>`<div>${e}</div>`).join(""):"An error occurred.",document.getElementById("customer-account-success").innerHTML="")}).catch(e=>{document.getElementById("customer-account-error").innerHTML=e.message,document.getElementById("customer-account-success").innerHTML=""}).finally(()=>{})};